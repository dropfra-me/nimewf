# Linking libewf

nimewf is a Nim library that links against libewf when your application is built.
Link flags are sourced from pkg-config via `config.nims` generated by Nimble tasks.

## Build Flags
- Compiler: include headers with `--passC:...` and link with `--passL:...` taken from pkg-config.
- Example per-project `config.nims` (auto-generated by Nimble tasks):
  ```nim
  when defined(windows):
    switch("passC", "-I%LIBEWF_DIR%/include")
    switch("passL", "-L%LIBEWF_DIR%/lib -lewf")
  when defined(linux) or defined(macosx):
    switch("passL", "$(pkg-config --libs libewf)")
  ```

## Platform Notes
- Windows: ensure `libewf.dll` is discoverable at runtime (same dir as EXE or on `PATH`). Prefer x64 builds; keep CRT/runtime consistent.
- Linux: if using non-system paths, add rpath: `switch("passL", "-Wl,-rpath,/opt/libewf/lib -L/opt/libewf/lib -lewf")`.
- macOS: if using non-system paths, `install_name_tool` or `@rpath` can help; simplest is `-Wl,-rpath,/usr/local/lib`.

## Verifying
- Compile a small program that imports `nimewf/ffi` and links (`nim c yourapp.nim`).
- If unresolved symbols appear, confirm architecture (x64), the presence of `libewf` on the link path, and that headers match the installed version.
